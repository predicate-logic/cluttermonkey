{"_id":"Dq1RSaZyPWG1gGwC","name":"edit_types","tags":[],"connectionId":"0inm7swqsv7BPRSl","queryText":"with a as (\n    select\n        bot,\n        edit_type,\n        count(1) cnt\n    from\n        clutter_stage.v_events\n    where\n        edit_type <> '142'\n    group by\n        1, 2\n)\nselect \n    * \nfrom \n    a\norder by\n   a.cnt desc;","chartConfiguration":{"fields":{"barlabel":"edit_type","barvalue":"cnt","labelFacet":"bot","valueFacet":""},"chartType":"verticalbar"},"createdDate":{"$$date":1513978814934},"createdBy":"admin@cluttermonkey.com","modifiedDate":{"$$date":1513980721574},"modifiedBy":"admin@cluttermonkey.com","lastAccessDate":{"$$date":1513980721574}}
{"_id":"gT8IVTheryUHI8nO","name":"top_editors","tags":[],"connectionId":"0inm7swqsv7BPRSl","queryText":"with data as (\n    select \n        bot\n        ,wiki\n        ,username\n        ,count(1) cnt\n    from\n        clutter_stage.v_events\n    where\n        edit_ts >= now() - '1 hour'::interval\n    group by 1, 2, 3\n)\n,bot as (\n    select\n        *\n    from\n        data\n    where\n        bot = true\n    order by\n        4 desc\n    limit 10\n)\n,notbot as (\n    select\n        *\n    from\n        data\n    where\n        bot = false\n    order by\n        4 desc\n    limit 10\n)\n, tmp as (\n    select * from notbot\n    union all\n    select * from bot\n) select * from tmp order by cnt desc\n;","chartConfiguration":{"fields":{"barlabel":"wiki","barvalue":"cnt","labelFacet":"bot","valueFacet":"","color":"bot","x":"username","y":"wiki","size":"cnt"},"chartType":"bubble"},"createdDate":{"$$date":1513978250079},"createdBy":"admin@cluttermonkey.com","modifiedDate":{"$$date":1513983223215},"modifiedBy":"admin@cluttermonkey.com","lastAccessDate":{"$$date":1513983223215}}
{"_id":"vlJqTigQJzeYiDEi","name":"edits_by_minute","tags":[],"connectionId":"0inm7swqsv7BPRSl","queryText":"with bot as (\n    select\n        count(1)\n        ,bot\n        ,to_char(date_trunc('minute', edit_ts) at time zone 'US/Pacific', 'HH24:MI') edit_ts\n    from\n        clutter_stage.v_events\n    where bot = true\n    group by 2, 3\n    limit 60\n)\n, notbot as (\n    select\n        count(1)\n        ,bot\n        ,to_char(date_trunc('minute', edit_ts) at time zone 'US/Pacific', 'HH24:MI') edit_ts\n    from\n        clutter_stage.v_events\n    where bot = false\n    group by 2, 3\n    limit 60\n)\nselect * from bot\nunion all\nselect * from notbot\norder by 2, 3 asc\n;","chartConfiguration":{"fields":{"x":"edit_ts","y":"count","xFacet":"bot","split":"bot","barlabel":"edit_ts","barvalue":"count","color":"bot","labelFacet":""},"chartType":"stacked-bar-vertical"},"createdDate":{"$$date":1513979770753},"createdBy":"admin@cluttermonkey.com","modifiedDate":{"$$date":1513981991970},"modifiedBy":"admin@cluttermonkey.com","lastAccessDate":{"$$date":1513981991970}}
